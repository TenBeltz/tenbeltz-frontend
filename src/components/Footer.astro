---
import { ReactComponent as LogoInstagram } from '@/assets/icons/logo-instagram-outline.svg';
import { ReactComponent as LogoLinkedin } from '@/assets/icons/logo-linkedin-outline.svg';
import { contactInfo } from './Contact.astro';
import { ScrollReveal } from './ScrollReveal';
import NewsletterForm from './NewsletterForm';
import { getLangFromUrl, useTranslations } from "@/i18n/utils";
import { getRelativeLocaleUrl } from 'astro:i18n';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

interface SocialMedia {
  name: string;
  logo: React.FC<React.SVGProps<SVGSVGElement>>;
  logoProps?: React.SVGProps<SVGSVGElement>;
  url: string;
}

interface FooterLink {
  name: string;
  url: string;
}

const socialMedias: SocialMedia[] = [
  {
    name: 'Instagram',
    logo: LogoInstagram,
    logoProps: { width: 20, height: 20, fill: '#94A3B8' },
    url: 'https://www.instagram.com/tenbeltz/',
  },
  {
    name: 'Linkedin',
    logo: LogoLinkedin,
    logoProps: { width: 20, height: 20, fill: '#94A3B8' },
    url: 'https://www.linkedin.com/company/tenbeltz/',
  }
];

const sections: FooterLink[] = [
  { name: t('nav.home'), url: getRelativeLocaleUrl(lang, '/') },
  { name: t('nav.problem'), url: getRelativeLocaleUrl(lang, '/') + '#realidad' },
  { name: t('nav.proposal'), url: getRelativeLocaleUrl(lang, '/') + '#propuesta' },
  { name: t('nav.whatWeDo'), url: getRelativeLocaleUrl(lang, '/') + '#que-hacemos' },
  { name: t('nav.method'), url: getRelativeLocaleUrl(lang, '/') + '#metodo' },
  { name: t('nav.pricing'), url: getRelativeLocaleUrl(lang, 'precios') },
  { name: t('nav.contact'), url: getRelativeLocaleUrl(lang, '/') + '#contact-section' },
];
---

<footer class="text-white bg-obsidian-shard">
  <div class="flex flex-col p-4 py-8 mx-auto gap-y-14 lg:p-16 max-w-screen-2xl">
    <div class="flex flex-col flex-wrap xs:flex-row gap-x-20 gap-y-10">
      <ScrollReveal client:visible className="flex flex-col gap-y-5">
        <h4 class="font-semibold">{t('footer.sections')}</h4>
        <ul class="flex flex-col gap-y-3">
          {sections.map(section => <li><a href={section.url} class="transition-colors text-slate-300 hover:text-slate-100">{section.name}</a></li>)}
        </ul>
      </ScrollReveal>
      <ScrollReveal client:visible delay={200} className="flex flex-col gap-y-5">
        <h4 class="font-semibold">{t('footer.contact')}</h4>
        <ul class="flex flex-col gap-y-3">
          <li><a href={`mailto:${contactInfo.email}`} class="transition-colors text-slate-300 hover:text-slate-100">{contactInfo.email}</a></li>
          {contactInfo.phones.map(phone => <li><a href={`tel:${phone}`} class="transition-colors text-slate-300 hover:text-slate-100">{phone}</a></li>)}
        </ul>
      </ScrollReveal>
      <ScrollReveal client:visible delay={300} className="flex flex-col gap-y-5 min-w-[220px] max-w-[320px]">
        <div>
          <h4 class="font-semibold">{t('footer.newsletter')}</h4>
          <p class="mt-2 text-xs text-slate-300">
            {t('footer.newsletterDesc')}
          </p>
        </div>
        <NewsletterForm client:idle variant="footer" source="footer" />
      </ScrollReveal>
    </div>
    
    <ScrollReveal client:visible className="flex justify-between py-3 text-sm border-t border-slate-400 text-slate-400">
      <span>
        {t('footer.copyright')}
      </span>
      <span class="flex gap-x-4 [&>a]:hover:cursor-pointer">
        {socialMedias.map(socialMedia => (
          <a href={socialMedia.url} target="_blank" aria-label={socialMedia.name} rel="noopener noreferrer">
            <socialMedia.logo {...(socialMedia.logoProps || {})} aria-hidden="true" className='hover:fill-slate-300 transition-colors' />
          </a>
        ))}
      </span>
    </ScrollReveal>
  </div>
</footer>
